<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,requiresActiveX=true">
    <title>code</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="msapplication-tap-highlight" content="no" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="css/common.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>

<!-- view -->
<div class="c-attachment" data-js="attachFile">
    <input type="file" class="c-attachment__handler" data-js="attachFile__handler" title="파일첨부">
    <span class="c-attachment__button">파일선택</span>
    <div class="c-attachment__text" data-js="attachFile__render">선택된 파일 없음</div>
    <button type="button" class="c-attachment__delete">첨부파일 삭제</button>
</div>

<br>
<!-- 파일이 첨부되면 첨부파일 삭제 버튼 노출 -->
<div class="c-attachment is-loaded" data-js="attachFile">
    <input type="file" class="c-attachment__handler" data-js="attachFile__handler" title="파일첨부">
    <span class="c-attachment__button">파일선택</span>
    <div class="c-attachment__text" data-js="attachFile__render">선택된 파일 없음</div>
    <button type="button" class="c-attachment__delete">첨부파일 삭제</button>
</div>

<style>
.c-attachment {position:relative}
.c-attachment__handler {position:absolute; top:0; left:0; opacity:0; width:64px; height:27px}
.c-attachment__button  {display:inline-block; width:64px; height:27px; border:1px solid #bfbfbf; background-color:#ececec; font-size:12px; text-align:center; line-height:25px}
.c-attachment__text {display:inline-block; margin-left:10px; font-size:13px; font-weight:200; line-height:27px}
.c-attachment__delete {display: none;}
.c-attachment.is-loaded .c-attachment__delete {display: block;}
</style>

<script>
/**
 *   첨부파일
 */
;(function( $, win, doc, undefined ){

    var attachFile = function(){
        var $wrap = $(this),
            $handler = $wrap.find('[data-js="attachFile__handler"]'),
            $render = $wrap.find('[data-js="attachFile__render"]'),
            defaultText = $.trim( $render.text() ) || '선택된 파일 없음';

        $handler.on('change',function(){
            var _value = this.value;
            if( _value ){
                _value = _value.split('\\');
                $render.text( _value[_value.length-1] );
            } else {
                $render.text( defaultText );
            }
        });
    };

    $('[data-js="attachFile"]').each(attachFile)

})(jQuery, window, document);

</script>
<!-- //view -->

<h1>html</h1>
<textarea class="code">
<div class="c-attachment" data-js="attachFile">
    <input type="file" class="c-attachment__handler" data-js="attachFile__handler" title="파일첨부">
    <span class="c-attachment__button">파일선택</span>
    <div class="c-attachment__text" data-js="attachFile__render">선택된 파일 없음</div>
    <button type="button" class="c-attachment__delete">첨부파일 삭제</button>
</div>

<!-- 파일이 첨부되면 첨부파일 삭제 버튼 노출 -->
<div class="c-attachment is-loaded" data-js="attachFile">
    <input type="file" class="c-attachment__handler" data-js="attachFile__handler" title="파일첨부">
    <span class="c-attachment__button">파일선택</span>
    <div class="c-attachment__text" data-js="attachFile__render">선택된 파일 없음</div>
    <button type="button" class="c-attachment__delete">첨부파일 삭제</button>
</div>
</textarea>

<h1>css</h1>
<textarea class="code">
/* ---------------------------------------------------------------------------------------------------------------------
File Attachment
--------------------------------------------------------------------------------------------------------------------- */
.c-attachment {position:relative}
.c-attachment__handler {position:absolute; top:0; left:0; opacity:0; width:64px; height:27px}
.c-attachment__button  {display:inline-block; width:64px; height:27px; border:1px solid #bfbfbf; background-color:#ececec; font-size:12px; text-align:center; line-height:25px}
.c-attachment__text {display:inline-block; margin-left:10px; font-size:13px; font-weight:200; line-height:27px}
.c-attachment__delete {display: none;}
.c-attachment.is-loaded .c-attachment__delete {display: block;}
</textarea>
<!-- //css -->

<h1>script</h1>
<p>현재 첨부하면 경로가 나오는것까지만 처리</p>
<textarea class="code">
/**
 *   첨부파일
 */
;(function( $, win, doc, undefined ){

    var attachFile = function(){
        var $wrap = $(this),
            $handler = $wrap.find('[data-js="attachFile__handler"]'),
            $render = $wrap.find('[data-js="attachFile__render"]'),
            defaultText = $.trim( $render.text() ) || '선택된 파일 없음';

        $handler.on('change',function(){
            var _value = this.value;
            if( _value ){
                _value = _value.split('\\');
                $render.text( _value[_value.length-1] );
            } else {
                $render.text( defaultText );
            }
        });
    };

    $('[data-js="attachFile"]').each(attachFile)

})(jQuery, window, document);
</textarea>

</body>